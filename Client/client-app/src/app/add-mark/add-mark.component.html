<!-- <app-mark-detail [mark]="mark"></app-mark-detail> -->

<div *ngIf="mark" class="flex-container vertical padded">
    <div class="padded">
        <div>Description:</div>
        <input [class.input-error]="!mark.description.length" maxlength="50" [(ngModel)]="mark.description" placeholder="description"/>
        <div *ngIf="!mark.description.length" class="error">
            Description is required
        </div>
    </div>
    <div class="padded">
        <div>Mark:</div>
        <input [class.input-error]="!mark.mark || !markValidationService.isValid(mark.mark)" maxlength="30" [(ngModel)]="mark.mark" placeholder="mark"/>
        <div *ngIf="!markValidationService.isValid(mark.mark)" class="error">
            Mark must be a valid number between 0 and 100.
        </div>
        <div *ngIf="!mark.mark" class="error">
            Mark is required
        </div>
    </div>
    <div class="padded">
        <div>Weight:</div>
        <input [class.input-error]="!mark.weight  || !markValidationService.isValid(mark.weight)" maxlength="30" [(ngModel)]="mark.weight" placeholder="weight"/>
        <div *ngIf="!markValidationService.isValid(mark.weight)" class="error">
            Weight must be a valid number between 0 and 100.
        </div>
        <div *ngIf="!mark.weight" class="error">
            Weight is required
        </div>
    </div>
    <div class="padded">
        <div>Category:</div>
        <select [(ngModel)]="mark.category">
            <option *ngFor="let category of categories" [ngValue]="category">{{category.description}}</option>
        </select>
    </div>
    <div class="padded">
        <div>Course:</div>
        <select [(ngModel)]="mark.course">
            <option *ngFor="let course of courses" [ngValue]="course">{{course.description}}</option>
        </select>
    </div>
    <div class="padded">
        <app-course-detail [course]="mark.course"></app-course-detail>
    </div>
    <div class="padded">
        <!-- [class.disabled]="valid"-->
        <button class="button" 
            [disabled]="!mark.description.length || !mark.mark || !mark.weight || !markValidationService.isValid(mark.mark) || !markValidationService.isValid(mark.weight)"
            [class.disabled]="!mark.description.length || !mark.mark || !mark.weight || !markValidationService.isValid(mark.mark) || !markValidationService.isValid(mark.weight)"
            (click)="add(mark)">Add mark</button>
    </div>
</div>
